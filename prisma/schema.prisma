// Prisma schema file

// Shadow DB
// Heroku without local PSQL:  to go around db user permission where it cannot create another db
// instance for Prisma when it runs a migration

// A few Prisma commands:

// npx prisma migrate dev
// npx prisma db seed - run prisma data script
// npx prisma studio - to see your models in the browser
// npx prisma db push, prisma db pull, prisma generate

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  shadowDatabaseUrl =  env("SHADOW_DATABASE_URL")
}

model User {
  id               Int              @id @default(autoincrement())
  createdAt   DateTime   @default(now())
  updatedAt  DateTime   @updatedAt
  email          String        @unique
  firstName   String
  lastName    String
  password   String
  playlists      Playlist[]
}

model Song {
  id               Int              @id @default(autoincrement())
  createdAt   DateTime   @default(now())
  updatedAt  DateTime   @updatedAt
  name         String
  artist          Artist         @relation(fields: [artistId], references: [id])
  artistId       Int
  playlists      Playlist[]
  duration     Int
  url              String
}

model Artist {
  id               Int             @id @default(autoincrement())
  createdAt   DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
  songs        Song[]
  name         String        @unique
}

model Playlist {
  id               Int             @id @default(autoincrement())
  createdAt   DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
  name         String
  songs         Song[]
  user           User         @relation(fields: [userId], references: [id])
  userId        Int
}
